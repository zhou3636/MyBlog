<!DOCTYPE html>
<!-- saved from url=(0035)https://hh.855955.xyz/file/ssl.html -->
<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>ikun</title>
<meta name="generator" content="Jekyll v3.10.0">
<meta property="og:title" content="安装环境">
<meta property="og:locale" content="en_US">
<meta name="description" content="练习两年半">
<meta property="og:description" content="练习两年半">
<link rel="canonical" href="https://hh.855955.xyz/file/ssl.html">
<meta property="og:url" content="https://hh.855955.xyz/file/ssl.html">
<meta property="og:site_name" content="ikun">
<meta property="og:type" content="website">
<meta name="twitter:card" content="summary">
<meta property="twitter:title" content="安装环境">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"练习两年半","headline":"安装环境","url":"https://hh.855955.xyz/file/ssl.html"}</script>
<!-- End Jekyll SEO tag -->

    <style class="anchorjs"></style><link rel="stylesheet" href="./ssl_files/style.css">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      

      <h2 id="安装环境">安装环境<a class="anchorjs-link " href="https://hh.855955.xyz/file/ssl.html#%E5%AE%89%E8%A3%85%E7%8E%AF%E5%A2%83" aria-label="Anchor" data-anchorjs-icon="" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p><code class="language-plaintext highlighter-rouge">apt update -y &amp;&amp; apt install -y curl &amp;&amp; apt install -y socat </code></p>
<h2 id="安装acmesh">安装acme.sh<a class="anchorjs-link " href="https://hh.855955.xyz/file/ssl.html#%E5%AE%89%E8%A3%85acmesh" aria-label="Anchor" data-anchorjs-icon="" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p><code class="language-plaintext highlighter-rouge">curl https://get.acme.sh | sh -s email=my@example.com</code></p>
<h2 id="申请更新">申请&amp;更新<a class="anchorjs-link " href="https://hh.855955.xyz/file/ssl.html#%E7%94%B3%E8%AF%B7%E6%9B%B4%E6%96%B0" aria-label="Anchor" data-anchorjs-icon="" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<h3 id="http">HTTP<a class="anchorjs-link " href="https://hh.855955.xyz/file/ssl.html#http" aria-label="Anchor" data-anchorjs-icon="" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>申请<code class="language-plaintext highlighter-rouge">~/.acme.sh/acme.sh  --issue -d example.com  --standalone</code><br>
更新<code class="language-plaintext highlighter-rouge">~/.acme.sh/acme.sh  --renew -d example.com  --standalone</code></p>
<h3 id="dns-api">DNS API<a class="anchorjs-link " href="https://hh.855955.xyz/file/ssl.html#dns-api" aria-label="Anchor" data-anchorjs-icon="" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>

<p>添加变量<code class="language-plaintext highlighter-rouge">export CF_Token=" ******************************** "</code><br>
参考网站<a href="https://github.com/acmesh-official/acme.sh/wiki/dnsapi">https://github.com/acmesh-official/acme.sh/wiki/dnsapi</a><br>
申请<code class="language-plaintext highlighter-rouge">~/.acme.sh/acme.sh --issue --dns dns_cf -d example.com</code><br>
更新<code class="language-plaintext highlighter-rouge">~/.acme.sh/acme.sh --renew --dns dns_cf -d example.com</code></p>
<h2 id="设置默认ca">设置默认ca<a class="anchorjs-link " href="https://hh.855955.xyz/file/ssl.html#%E8%AE%BE%E7%BD%AE%E9%BB%98%E8%AE%A4ca" aria-label="Anchor" data-anchorjs-icon="" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p><code class="language-plaintext highlighter-rouge">~/.acme.sh/acme.sh --set-default-ca --server letsencrypt </code></p>

<h2 id="安装到目录">安装到目录<a class="anchorjs-link " href="https://hh.855955.xyz/file/ssl.html#%E5%AE%89%E8%A3%85%E5%88%B0%E7%9B%AE%E5%BD%95" aria-label="Anchor" data-anchorjs-icon="" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p><code class="language-plaintext highlighter-rouge">~/.acme.sh/acme.sh --installcert -d example.com --key-file /root/k.key --fullchain-file /root/c.crt</code></p>

<h2 id="定义端口">定义端口<a class="anchorjs-link " href="https://hh.855955.xyz/file/ssl.html#%E5%AE%9A%E4%B9%89%E7%AB%AF%E5%8F%A3" aria-label="Anchor" data-anchorjs-icon="" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>如果用了反代之类的不是 80 端口，则可以手动指定。
<code class="language-plaintext highlighter-rouge">acme.sh  --issue  -d example.com  --standalone --httpport 88</code>
当然它还支持 tls 模式，不是 443 端口的话也可以自行指定。</p>
<h3 id="自行指定tls端口">自行指定tls端口<a class="anchorjs-link " href="https://hh.855955.xyz/file/ssl.html#%E8%87%AA%E8%A1%8C%E6%8C%87%E5%AE%9Atls%E7%AB%AF%E5%8F%A3" aria-label="Anchor" data-anchorjs-icon="" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p><code class="language-plaintext highlighter-rouge">acme.sh  --issue  -d example.com  --alpn --tlsport 8443  </code><br>
<a href="https://blog.csdn.net/luanlz/article/details/139833958">https://blog.csdn.net/luanlz/article/details/139833958</a></p>


      
    </div>
    <script src="./ssl_files/anchor.min.js.下载" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  

</body></html>